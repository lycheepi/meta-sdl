From 016385a69c40191794859eee99b2bc0a0053cd68 Mon Sep 17 00:00:00 2001
From: Truong Van Huy <huytv12@fsoft.com.vn>
Date: Mon, 15 Jul 2019 10:21:11 +0700
Subject: [PATCH 3/4] Change to use standard libdir

The lib*.so should be in /usr/lib path.

Signed-off-by: Phong Tran <tranmanphong@gmail.com>
---
 src/components/policy/policy_external/CMakeLists.txt | 4 ++--
 src/components/policy/policy_regular/CMakeLists.txt  | 2 +-
 src/components/utils/CMakeLists.txt                  | 2 +-
 src/plugins/appenders/CMakeLists.txt                 | 2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/components/policy/policy_external/CMakeLists.txt b/src/components/policy/policy_external/CMakeLists.txt
index bd05291..c47b6e8 100644
--- a/src/components/policy/policy_external/CMakeLists.txt
+++ b/src/components/policy/policy_external/CMakeLists.txt
@@ -30,7 +30,7 @@
 
 # --- Policy
 set(target Policy)
-set(install_destination bin)
+set(install_destination ${CMAKE_INSTALL_LIBDIR})
 set(copy_destination ${CMAKE_BINARY_DIR}/src/appMain)
 set(library_name ${CMAKE_SHARED_LIBRARY_PREFIX}${target}${CMAKE_SHARED_LIBRARY_SUFFIX})
 
@@ -90,7 +90,7 @@ add_custom_target(copy_library_${target} ALL
     COMMENT "Copying library ${library_name}")
 
 install(TARGETS ${target}
-  DESTINATION ${install_destination}
+  DESTINATION ${CMAKE_INSTALL_LIBDIR}
   PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE
     GROUP_READ GROUP_EXECUTE
     WORLD_READ WORLD_EXECUTE
diff --git a/src/components/policy/policy_regular/CMakeLists.txt b/src/components/policy/policy_regular/CMakeLists.txt
index 3679b2e..36cdff5 100644
--- a/src/components/policy/policy_regular/CMakeLists.txt
+++ b/src/components/policy/policy_regular/CMakeLists.txt
@@ -96,7 +96,7 @@ endif()
 
 set(LIBRARY_NAME ${CMAKE_SHARED_LIBRARY_PREFIX}Policy${CMAKE_SHARED_LIBRARY_SUFFIX})
 set(TARGET_LOCATION ${CMAKE_CURRENT_BINARY_DIR}/${LIBRARY_NAME})
-set(INSTALL_DESTINATION bin)
+set(INSTALL_DESTINATION ${CMAKE_INSTALL_LIBDIR})
 set(COPY_DESTINATION ${CMAKE_BINARY_DIR}/src/appMain)
 
 add_custom_target(copy_policy_library ALL
diff --git a/src/components/utils/CMakeLists.txt b/src/components/utils/CMakeLists.txt
index 9562b50..1d7fcf1 100644
--- a/src/components/utils/CMakeLists.txt
+++ b/src/components/utils/CMakeLists.txt
@@ -134,7 +134,7 @@ if(BUILD_TESTS)
 endif()
 
 install(TARGETS "Utils"
-  DESTINATION bin
+  DESTINATION ${CMAKE_INSTALL_LIBDIR}
   PERMISSIONS
     OWNER_READ OWNER_WRITE
     GROUP_READ
diff --git a/src/plugins/appenders/CMakeLists.txt b/src/plugins/appenders/CMakeLists.txt
index 3d18e62..4c39f8b 100644
--- a/src/plugins/appenders/CMakeLists.txt
+++ b/src/plugins/appenders/CMakeLists.txt
@@ -46,7 +46,7 @@ target_link_libraries(appenders ${LIBRARIES})
 add_dependencies(appenders install-3rd_party_logger)
 
 install(TARGETS appenders
-  DESTINATION bin
+  DESTINATION ${CMAKE_INSTALL_LIBDIR}
   PERMISSIONS
     OWNER_READ OWNER_WRITE OWNER_EXECUTE
     GROUP_READ GROUP_EXECUTE
-- 
2.7.4

